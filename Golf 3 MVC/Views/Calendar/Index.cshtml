
@{
    //Layout = null;
    ViewBag.Title = "Bokningsschema";
    @model Golf_3_MVC.Models.CalendarBookings

}




<!DOCTYPE html>
<html>
<head>
    <title>Hållslaget GK</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link href="~/Content/Site.css" rel="stylesheet" />
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="~/Scripts/jquery-3.1.1.js"></script>
    <script src="~/Scripts/jquery-3.1.1.min.js"></script>
    <script src="medlemmar.js"></script>
    <style>
        body
        {
            background-color:#eee;

        }
    </style>
    <link href="~/Content/sweetalert/sweet-alert.css" rel="stylesheet" />
    <script src="~/Scripts/dist/sweetalert.min.js"></script>
    @*<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/smoothness/jquery-ui.css" />*@
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="~/Scripts/site.js"></script>
    <script>
        $(document).ready(function () {
            $("#medlemsId").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "/Calendar/GetAutoCompleteData",
                        type: "POST",
                        dataType: "json",
                        data: { term: request.term },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.fornamn, value: item.efternamn, value: item.golf_id
                                }
                            }))
                        },
                        messages: {
                            noResults: "", results: ""
                        }
                    });
                }
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            $("#sokBokning").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "/Calendar/GetAutoCompleteDataBokning",
                        type: "POST",
                        dataType: "json",
                        data: { term: request.term },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.text
                                }
                            }))
                        },
                        messages: {
                            noResults: "", results: ""
                        }
                    });
                }
            });
        });
    </script>
    <script>
        $(document).ready(function () {
            $("#sokBokning2").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "/Calendar/GetAutoCompleteDataBokning",
                        type: "POST",
                        dataType: "json",
                        data: { term: request.term },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.text
                                }
                            }))
                        },
                        messages: {
                            noResults: "", results: ""
                        }
                    });
                }
            });
        });
    </script>





</head>
<body>
    <div class="row">
        <ul class="nav nav-pills nav-stacked">

            @if (User.IsInRole("Personal") || User.IsInRole("Admin"))  // ENDAST FÖR PERSONAL OCH ADMIN
            {
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                    Säsong <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">

                    @using (Html.BeginForm("Seasontoggle", "Calendar"))
                    {
                        <p>
                            Öppna/Stäng: <input id="responsable" name="checkResp" value="true" type="checkbox" />
                            <br />
                            <input id="seasontogglebtn" type="submit" value="Bekräfta" />
                        </p>
                    }
                </ul>
            </li>
                /////////////////////////////////////////
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                    Blockera tider <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">

                        <p>
                            För att blockera tider boka en golftid som vanligt och välj hur länge tiden ska vara blockerad.
                            Systemet identifierar av sig självt att det är en ny blockering och inte en ny bokning.
                        </p>


                </ul>
            </li>
                /////////////////////////////////////////

            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                    Ta bort blocktider <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    @using (Html.BeginForm("DeleteBlocktime", "Calendar"))
                    {
                        <p>
                            Välj bokning: @Html.DropDownList("BlocktimeBokningar", new SelectList(Model.allaBlocktimeBokningar, "id", "start_date"))

                            <input type="submit" name="tabort" value="Ta bort" />

                            @Html.Raw(TempData["msg"])
                        </p>
                    }

                </ul>

            </li>
                /////////////////////////////////////////
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                        Lägg till/Ta bort person <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        @using (Html.BeginForm("Create", "Calendar"))
                        {
                            <p>
                                Sök efter bokning: @Html.TextBox("sokBokning")
                            </p>
                            <p>
                                Sök efter medlem: @Html.TextBox("medlemsId")<br />
                                <input type="submit" name="laggtill" value="Lägg till" />
                                <input type="submit" name="tabort" value="Ta bort" />

                                @Html.Raw(TempData["msg"])
                            </p>
                        }
                    </ul>
                </li>

                /////////////////////////////////////////

            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                        Lägg till/ta bort gäst <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        @using (Html.BeginForm("Create", "Calendar"))
                        {
                            <p>
                                Sök efter bokning: @Html.TextBox("sokBokning2")<br />
                                Skriv in gästens namn: @Html.TextBox("gast")<br /><br />
                                <input type="submit" name="laggtillGast" value="Lägg till" />
                                <input type="submit" name="tabortGast" value="Ta bort" />

                                @Html.Raw(TempData["msg"])
                            </p>
                        }
                    </ul>
                </li>
                /////////////////////////////////////////
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                    Incheckning <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    @using (Html.BeginForm("Incheckning", "Calendar"))
                    {
                        <p>
                            &emsp;Välj bokning: &emsp;@Html.DropDownList("Bokningar", new SelectList(Model.allaBokningar, "id", "start_date"), new
                                                 {

                                                     onchange = @"Javascript:GetBokare();"

                                                })


                            &emsp;
                            @Html.LabelFor(model => model.Namn1, "foo bar")
                            <hr /><label id="Spelare 1">&emsp;Checka in spelare 1 : <br />&emsp;</label><hr />
                            <label>&emsp;Checka in spelare 2 :<br />&emsp;@Model.Namn2</label><br /><hr />
                            <label>&emsp;Checka in spelare 3 :<br />&emsp;@Model.Namn3</label><br /><hr />
                            <label>&emsp;Checka in spelare 4 :<br />&emsp;@Model.Namn4</label><br /><hr />

                            <input id="hidden" type="hidden" value="1" />
                            <input type="button" value="klicka" onClientClick ="GetBokare()" />
                            &emsp;@*<input type="submit" name="checkainBtn" value="Checka in"/>*@

                            @Html.Raw(TempData["msg"])
                        </p>
                    }

                </ul>

            </li>


            }

            else
            {

                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="true">
                        Lägg till/Ta bort person <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        @using (Html.BeginForm("CreateMedlem", "Calendar"))
                        {
                            <p>
                                Välj bokning:<br /> @Html.DropDownList("Bokningar", new SelectList(Model.minaBokningar, "id", "start_date"))
                            </p>
                            <p>
                                Skriv in golfID/gästnamn: @Html.TextBox("golfidstring")<br/><br />
                                Är personen en gäst? @Html.CheckBox("checkbox", "false")<br /><br />
                                <input type="submit" name="laggtill" value="Lägg till" />
                                <input type="submit" name="tabort" value="Ta bort" />

                                @Html.Raw(TempData["msg"])
                            </p>
                        }
                    </ul>
                </li>
                /////////////////////////////////////////
            }

        </ul>


        <div class="panel panel-default panel-kalender">
            <div class="panel-heading">Bokningsschema</div>
            <div class="panel-body">
                <div style="height:1550px;width:auto;margin:0 auto">

                    @Html.Raw(Model.sched.Render())
                </div>
            </div>
        </div>
    </div>

        <script type="text/javascript">
        function GetBokare()
        {

            var e = document.getElementById("Bokningar");
            var bokID = e.options[e.selectedIndex].value;



            var json = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model.medbokareLista).ToList());
            var json1 = @Html.Raw(Json.Encode(Model.medbokareLista.ToList()));


            alert("I am an alert box!");
        }
        </script>

</body>
</html>
